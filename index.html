<!DOCTYPE html>
<html>

<head>
	<title>jQuery Rise &amp; Fall</title>
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme.css">
	<link rel="stylesheet" href="css/font-awesome.css">
	<link rel="icon" href="favicon.ico" />
	<link rel="stylesheet" href="css/print/pdf.css" media="print">

	<meta property="twitter:title" content="The Rise & Fall of jQuery" />
	<meta property="twitter:description" content="How jQuery became the biggest framework, why it isn't best practice in 2017 and what is?" />
	<meta property="twitter:text:description" content="How jQuery became the biggest framework, why it isn't best practice in 2017 and what is?" />
	<meta name="twitter:image:src" content="https://www.evolutionjobs.com/uploads/jq-new-banner.jpg" />
	<meta property="og:title" content="The Rise & Fall of jQuery" />
	<meta property="og:description" content="How jQuery became the biggest framework, why it isn't best practice in 2017 and what is?" />
	<meta name="og:image" content="https://www.evolutionjobs.com/uploads/jq-new-banner.jpg" />

</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section data-background="#ed1c40" id="jsMeetupSplash">
				<h1 style="color: #ffffff">
					<span class="fa fa-fw fa-2x fa-meetup"></span>
					<div style="text-transform: none; margin-top:1em; font-size: .5em;">JavaScript North West Meetup</div>
				</h1>
			</section>
			<section id="title" data-background="#131B28">
				<img title="The Rise &amp; Fall of jQuery" src="https://www.evolutionjobs.com/uploads/jq-new-banner.jpg" border=0 class="plain">
				<div>
					<div style="margin:1em 0;">
						<img src="img/kxh_sq.jpg" border="0" style="border: none; border-radius: 50%; width: 2em; height: 2em; vertical-align: middle; margin: 0 .5em 0 0;">
						<a href="mailto:keith.henry@evolutionjobs.co.uk">keith.henry@evolutionjobs.co.uk</a>
					</div>

					<div style="margin:1em 0;">
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-lg fa-twitter"></span> <a href="https://twitter.com/KHenry" target="_blank">@khenry</a>
						</div>
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-lg fa-github"></span> <a href="https://github.com/KeithHenry" target="_blank">KeithHenry</a>
						</div>
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-lg fa-stack-overflow"></span>
							<a href="http://stackexchange.com/users/689" target="_blank">
								<img src="http://stackexchange.com/users/flair/689.png" width="208" height="58" alt="profile for Keith on Stack Exchange, a network of free, community-driven Q&amp;A sites"
									title="profile for Keith on Stack Exchange, a network of free, community-driven Q&amp;A sites" style="border: 0; padding: 0; margin: 0; vertical-align: middle;">
							</a>
						</div>
					</div>

					<div style="margin:1em 0;" class="fragment">
						<span class="fa fa-fw fa-television"></span> 
						<a href="https://keithhenry.github.io/jsmeetup-jquery-rise-fall">https://keithhenry.github.io/jsmeetup-jquery-rise-fall</a>
					</div>
				</div>
			</section>
		
			<section id="intro">
				<h2>jQuery</h2>
				<p class="fragment">For a surprising number of developers <code class="javascript inline">jQuery == Javascript</code></p>
				<p class="fragment">(They're wrong)</p>
				<p class="fragment">How jQuery became the biggest framework.</p>
				<p class="fragment">Why it isn't best practice in 2017.</p>
				<p class="fragment">What is?</p>
			</section>

			<section id="trends" data-background="#ffffff">
				<h2 style="color: #000000">Trends</h2>
				<a href="https://insights.stackoverflow.com/trends?tags=jquery%2Cangular%2Cangularjs%2Creactjs" target="_blank">
				<img src="img/javascript-large-1-1320x800.png" border="0" class="plain"></a>
			</section>

			<section>
				<section id="history">
					<h2>2006</h2>
					<p>When jQuery launced the web was a <i>very</i> different place.</p>
				</section>
				<section id="browsers2006" style="text-align: left;">
					<h3>Browsers</h3>
					<p><span class="fa fa-fw fa-lg fa-internet-explorer"></span>IE<span class="fragment">6 was king, with something like 60% market share.</span></p>
					<p class="fragment">Older versions of IE were common, something like 25% of all visitors.</p>
					<p><span class="fa fa-fw fa-lg fa-firefox"></span>Firefox <span class="fragment">had 9-10%.</span></p>
					<p><span class="fa fa-fw fa-lg fa-safari"></span>Safari <span class="fragment">(and all the other browsers) were the remaining &lt;5%.</span></p>
					<p><span class="fa fa-fw fa-lg fa-chrome"></span>Chrome <span class="fragment">wouldn't be released until 2008.</span></p>
				</section>
				<section id="compatibility2006" style="text-align: left;">
					<h3>Browser Compatibility</h3>
					<p>Each of the browsers had different:</p>
					<ul>
						<li class="fragment">DOM selection and creation methods.</li>
						<li class="fragment">Ways of subscribing to events.</li>
						<li class="fragment">Implementations of <code class="javascript inline">XMLHttpRequest</code>.</li>
						<li class="fragment">Loads of quirks and proprietary features (like DHTML Behaviors).</li>
					</ul>
				</section>
				<section id="compatibility2006" style="text-align: left;">
					<h3><span class="fa fa-fw fa-lg fa-internet-explorer"></span>Just how bad was it?</h3>
					<p class="fragment">For example IE4, 5 &amp; 6 had a bug:</p>
					<p class="fragment">Elements added to a document fragment would <a href="https://msdn.microsoft.com/en-us/library/bb250448%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396" target="_blank">memory leak</a>.</p>
					<p class="fragment">All DOM manipulation had to be done top down.</p>
					<p class="fragment">Get this wrong and IE would use more and more memory until it crashed.</p>
				</section>
				<section id="mobile2006" style="text-align: left;">
					<h3>Mobile</h3>
					<p class="fragment"><a href="https://en.wikipedia.org/wiki/Wireless_Application_Protocol" target="_blank">WAP</a> phones common.</p>
					<p class="fragment">Majority of smart phones were Blackberry (remember them?) or Symbian.</p>
					<p class="fragment">iPhone wouldn't arrive until 2007.</p>
					<p class="fragment">Either don't bother or separate minimal site.</p>
				</section>
				<section id="server2006" style="text-align: left;">
					<h3>Server</h3>
					<p class="fragment">Servers were mostly Java, ASP 'Classic', .NET WebForms, PHP, or even CGI C/Perl scripts.</p>
					<p class="fragment">HTML content built server side.</p>
					<p class="fragment">JS typically added inline.</p>
					<p class="fragment">REST was about, but SOAP was far more common.</p>
				</section>
				<section id="sample2006" style="text-align: left;">
					<h3>Typical Page in 2006</h3>
<pre><code class="asp"><%-- Typical asp/aspx page --%>
<div>
	<%=content%>
	<div click="javascript:alert(<%=message%>)" 
		 style="cursor:pointer; border: 1px solid black;">
		 Click Me!
	</div>
</div></code></pre>
					<p class="fragment">Using <code class="javascript inline">&lt;div&gt;</code> instead of any built-in control was the 
					standard behaviour (and a pet hate of mine).</p>
				</section>
			</section>

			<section>
				<section id="rise">
					<h2>Rise of jQuery</h2>
					<p>In this landscape jQuery made a huge difference.</p>
				</section>
				<section id="riseDomManipulation" style="text-align: left;">
					<h3>DOM Manipulation</h3>
					<p class="fragment">Get element from DOM: <code class="javascript inline">$('CSS selector')</code></p>
					<p class="fragment">Create DOM fragment from HTML: <code class="javascript inline">$('&lt;tag&gt;content&lt;/tag&gt;')</code></p>
					<p class="fragment">The <a href="https://github.com/jquery/sizzle" target="_blank">Sizzle</a> engine made this quick, even on IE.</p>
				</section>
				<section id="riseEvents" style="text-align: left;">
					<h3>Events</h3>
					<p class="fragment">Subscription: <code class="javascript inline">element.on('click', function() {...})</code></p>
					<p class="fragment">Cancellation: <code class="javascript inline">element.off('click')</code></p>
					<p class="fragment">Fire once: <code class="javascript inline">element.one('click', function() {...})</code></p>
					<p class="fragment">Event tidy up - avoid memory leaks.</p>
				</section>
				<section id="riseHttpRequests" style="text-align: left;">
					<h3>HTTP Requests</h3>
					<p class="fragment">
						<code class="javascript inline">ActiveXObject('Microsoft.XMLHTTP')</code> vs
						<code class="javascript inline">new ActiveXObject('MSXML2.XMLHTTP')</code> vs
						<code class="javascript inline">XMLHttpRequest</code></p>
					<p class="fragment"><code class="javascript inline">$.ajax</code> added a consistent method with request-type handling.</p>
				</section>
				<section id="riseReady" style="text-align: left;">
					<h3>Ready Event</h3>
					<pre class="fragment"><code class="javascript">$(function(){
    // Put your initialisation code in here 
	// and it can hook up anything in the page.
});</code></pre>
					<p class="fragment">You never had to worry whether an element was loaded into the DOM yet.</p>
				</section>
				<section id="riseConsistency" style="text-align: left;">
					<h3>Consistent</h3>
					<p class="fragment">Web front end developers could learn jQuery and just get on with developing instead of faffing about with bloody IE awfulness.</p>
					<p class="fragment">Components and plug-ins could depend on jQuery and be sure of it working in every browser.</p>
					<p class="fragment">Soon there was an ecosystem of jQuery components.</p>
				</section>
				<section id="riseSummary">
					<h2>jQuery <i>was</i> Awesome</h2>
				</section>
			</section>

			<section>
				<section id="fall">
					<h2>Fall of jQuery</h2>
					<p>Today, in 2017, there are very few new projects where jQuery is well suited.</p>
				</section>
				<section id="fallPoints" style="text-align: left;">
					<h3>The Landscape has Changed</h3>
					<p class="fragment">Standards have improved.</p>
					<p class="fragment">Mobile more important.</p>
					<p class="fragment">Client side rendering.</p>
					<p class="fragment">New technologies.</p>
				</section>
				<section id="cannotChange" style="text-align: left;">
					<h3>jQuery Cannot Change</h3>
					<p class="fragment">Too many components depend on the existing behaviour.</p>
					<p class="fragment">There's no path from jQuery's replace-everything approach to a more modern shim what's missing style.</p>
					<p class="fragment">Let's look at what jQuery does, and see what could be done better...</p>
				</section>
			</section>

			<section>
				<section id="dom">
					<h2>DOM Manipulation</h2>
					<p>One of jQuery's strengths was consistent easy DOM manipulation.</p>
				</section>
				<section id="domSelect" style="text-align: left;">
					<h3>Element Selection</h3>
					<p>Most browsers now have <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll" target="_blank">native support for getting elements by CSS3 selectors</a>:</p>
					<pre class="fragment"><code class="javascript">// Simple $ selector
function $(selector, context) {
    // We have a selector, optionally apply the context
    var result = (context || document).querySelectorAll(selector);

    // If one element return it instead of the collection
    return result || result.length === 1 ? result[0] : result;
}

var element = $('selector');</code></pre>
					<p class="fragment">(works in current browsers, except IE8)</p>
				</section>
				<section id="domWrapper" style="text-align: left;">
					<h3>jQuery Wrapper</h3>
					<p class="fragment"><code class="javascript inline">$('selector')</code> returns a wrapper object with helper methods.</p>
										<pre class="fragment"><code class="javascript">// Mash of DOM elements, NodeList and jQuery collections
$('selector').click(function() {
    // Turn DOM element we're acting on into a jQuery wrapper
    var $this = $(this);

    // Get the DOM element from the jQuery collection
    var domEle = $something[0];
});</code></pre>
					<p class="fragment">Convention: prefix jQuery variables with <code class="javascript inline">$</code></p>
					<p class="fragment">Add components to the jQuery prototype: <code class="javascript inline">$('selector').myComponent()</code></p>
				</section>
				<section id="domWrapperWhy" style="text-align: left;">
					<h3>Why Wrap <code class="javascript inline">HTMLElement</code>?</h3>
					<p>Why didn't jQuery just extend all the DOM elements and avoid all this?</p>
					<p class="fragment">This would leak in IE.</p>
					<p class="fragment">jQuery coding style: chaining.</p>
				</section>
				<section id="domCreation" style="text-align: left;">
					<h3>DOM Creation</h3>
					<p>Easy to create DOM fragments: <code class="javascript inline">$('&lt;span&gt;content&lt;/span&gt;')</code></p>
					<pre class="fragment"><code class="javascript">// Add to our $ implementation
function $(selector, context) {
    if(selector.indexOf('<') === 0) {
        // We'be been passed an HTML string, parse it as DOM content
        var outer = document.createElement('div');
        outer.innerHTML = selector; 
        return outer.children.length === 1 ? 
			outer.children[0] : outer.children;
    }

    // See selector code above...</code></pre>
				</section>
				<section id="domCreationBad" style="text-align: left;">
					<h3>Why is this bad?</h3>
					<p>Setting <code class="javascript inline">innerHTML</code> is slow - expect <a href="http://jankfree.org/" target="_blank">jank</a>.</p>
					<pre class="fragment"><code class="javascript">// Slow, extra &lt;div&gt; element created and discarded
var outer = document.createElement('div');
outer.innerHTML = '<span>content</span>'; 
return outer.children[0];

// Faster, less memory needed
var ele = document.createElement('span');
ele.appendChild(document.createTextNode('content'));
return ele;</code></pre>
					<p class="fragment">This isn't as nice code though...</p>
				</section>
			</section>

			<section>
				<section id="betterDom" data-background="#009688">
					<h2>Aside: A Better Way to Create Elements</h2>
					<p>How could we create HTML Elements faster, cleaner and with more concise code?</p>
				</section>
				<section data-background="https://c1.staticflickr.com/4/3425/3355824586_207b78009b_b.jpg"></section>
				<section id="domCreationBetter" style="text-align: left;" data-background="#009688">
					<h3>Idea: JS that looks like HTML</h3>
					<p>If we're going to mix HTML and JS why not have JS functions to create elements?</p>
					<pre class="fragment"><code class="javascript">// Factory function to create any &lt;tag&gt;
function createElement(tag, content) {
    var ele = document.createElement(tag);
    if(content) 
        ele.appendChild(document.createTextNode(content));
    
    return ele;
}

// Then helper methods for different tags
function div(content) { return createElement('div', content); }
function span(content) { return createElement('span', content); }
// ... etc

var newSpan = $('<span>content</span>');
// becomes
var newSpan = span('content');</code></pre>
					<p class="fragment">Looking a little better, but we can do more...</p>
				</section>
				<section id="domCreationBetterer" style="text-align: left;" data-background="#009688">
					<h3>Add Attributes and Children</h3>
					<p>We also need to be able to set attributes and add children.</p>
					<pre class="fragment"><code class="javascript">// Add attributes
function createElement(tag, content, children) {
	// ... create ele then add attributes with setAttribute
	for (var attr in ele)
		if (content[attr]) {
			ele.setAttribute(attr, content[attr]);
			delete content[attr];
		}

	// Set everything else as properties
	for (var prop in content)
		ele[prop] = content[prop];

	for (var i = 0; i < children.length; i++)
		ele.appendChild(children[i]);
}</code></pre>
					<p class="fragment">See 
						<a href="https://github.com/KeithHenry/jsmeetup-jquery-rise-fall/blob/master/samples/dom-builder.js" target="_blank"><span class="fa fa-fw fa-github"></span></a> 
						<a href="https://jsfiddle.net/KeithHenry/7snzkugx/" target="_blank"><span class="fa fa-fw fa-jsfiddle"></span></a> 
						for this with support for strings and style properties too.</p>
				</section>
				<section id="domCreationBetterSample" style="text-align: left;" data-background="#009688">
					<h3>Better DOM Example</h3>
					<pre><code class="javascript">// JS ends up looking a lot like HTML
var divElement = 
	div({ style: 'background-color:grey;', extra: true }, [
		div('panel 1'),
		div({ text: 'panel 2' }),
		div({ style: 'background-color:grey;' }, 
			span({ style: 'color:blue;' }, 'panel 3'))
]);</code></pre>
					<p class="fragment">Nice! But... <span class="fragment">maybe this should be data driven.</span></p>
					<p class="fragment">Could we parse HTML into data, then apply our factory?</p>
				</section>
				<section id="domCreationJsx" style="text-align: left;" data-background="#009688">
					<h3 class="fragment">JSX</h3>
					<p>Yes, yes we can, but someone has already done it.</p>
					<p class="fragment">This is (extremely simplified here) what <a href="http://buildwithreact.com/tutorial/jsx" target="_blank">JSX does</a>:</p>
					<pre class="fragment hljs no-highlight">// JSX is HTML-like in JS
&lt;div style={{backgroundColor: '#f00'}}&gt;content&lt;/div&gt;;</pre>
					<pre class="fragment"><code class="javascript">// Pre-compiles to factory method calls
React.createElement('div', {style: {backgroundColor: '#f00'}}, 'content');</code></pre>
					<p class="fragment">React?</p>
				</section>
				<section id="domCreationReact" style="text-align: left;" data-background="#009688">
					<h3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_2" x="0px" y="0px" width=".8em" height=".8em" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
<circle fill="#00D8FF" cx="299.529" cy="299.628" r="50.167"/>
<path fill="none" stroke="#00D8FF" stroke-width="24" stroke-miterlimit="10" d="M299.529,197.628  c67.356,0,129.928,9.665,177.107,25.907c56.844,19.569,91.794,49.233,91.794,76.093c0,27.991-37.041,59.503-98.083,79.728  c-46.151,15.291-106.879,23.272-170.818,23.272c-65.554,0-127.63-7.492-174.29-23.441c-59.046-20.182-94.611-52.103-94.611-79.559  c0-26.642,33.37-56.076,89.415-75.616C167.398,207.503,231.515,197.628,299.529,197.628z"/>
<path fill="none" stroke="#00D8FF" stroke-width="24" stroke-miterlimit="10" d="M210.736,248.922  c33.649-58.348,73.281-107.724,110.92-140.48c45.35-39.466,88.507-54.923,111.775-41.505  c24.248,13.983,33.042,61.814,20.067,124.796c-9.81,47.618-33.234,104.212-65.176,159.601  c-32.749,56.788-70.25,106.819-107.377,139.272c-46.981,41.068-92.4,55.929-116.185,42.213  c-23.079-13.31-31.906-56.921-20.834-115.233C153.281,368.316,176.758,307.841,210.736,248.922z"/>
<path fill="none" stroke="#00D8FF" stroke-width="24" stroke-miterlimit="10" d="M210.821,351.482  c-33.746-58.292-56.731-117.287-66.312-166.255c-11.544-58.999-3.382-104.109,19.864-117.566  c24.224-14.024,70.055,2.244,118.14,44.94c36.356,32.28,73.688,80.837,105.723,136.173c32.844,56.733,57.461,114.209,67.036,162.582  c12.117,61.213,2.309,107.984-21.453,121.74c-23.057,13.348-65.249-0.784-110.239-39.499  C285.567,460.886,244.898,410.344,210.821,351.482z"/>
</svg> <a href="https://facebook.github.io/react/" target="_blank">React</a></h3>
					<p>React is a far more complete implementation of this idea.</p>
					<p class="fragment">DOM as data can be compared and only differences applied.</p>
					<p class="fragment">This abstraction is called the <i>virtual DOM</i>.</p>
					<p class="fragment">See also <a href="https://github.com/developit/preact" target="_blank">Preact</a> for more lightweight alternative with fewer features.</p>
				</section>
				
				<section id="domCreationWC" style="text-align: left;" data-background="#009688">
					<h3>Web Components</h3>
					<p class="fragment"><a href="https://vuejs.org/" target="_blank">Vue.js</a> uses a similar model, but uses the 
					<a href="https://github.com/w3c/webcomponents/blob/gh-pages/proposals/Slots-Proposal.md" target="_blank">slots API</a>.</p>
					<p class="fragment">Web Components build DOM with <code class="javascript inline">&lt;template&gt;</code> and Shadow DOM.</p>
					<p class="fragment">(more on these later...)</p>
				</section>
				
				<section id="domSummary" style="text-align: left;">
					<h3>jQuery DOM</h3>
					<p class="fragment">There are better ways to select and build DOM.</p>
					<p class="fragment">jQuery includes a lot of DOM manipulation code, but it standardises and wraps rather than abstracts.</p>
				</section>
			</section>

			<section>
				<section id="events">
					<h2>Events</h2>
					<p>jQuery makes adding an event to existing page content easy.</p>
				</section>
				<section id="eventStandards" style="text-align: left;">
					<h3>Event Standards</h3>
					<p>jQuery hid browser quirks with easy to use code:</p>
					<pre><code class="javascript">// Get the element and subscribe event
$('selector').on('event', handler);</code></pre>
					<p class="fragment" data-fragment-index=1>It's now easy in all current browsers:</p>
					<pre class="fragment" data-fragment-index=1><code class="javascript">// Get the element and subscribe event
document.querySelector('selector').addEventListener('event', handler);</code></pre>
<p class="fragment" data-fragment-index=2>(Except IE8, but let's just punish those users with an extra JS shim to download rather than make everyone go through the wrapper.)</p>
				</section>
				<section id="eventFeatures" style="text-align: left;">
					<h3>Event Features</h3>
					<p>Events have continued to evolve with modern browsers:</p>
					<p class="fragment" data-fragment-index=1>Passive events avoid dropped frames while the browser waits for event cancellation that never happens.</p>
					<pre class="fragment" data-fragment-index=1><code class="javascript">// In handler preventDefault() will be ignored
element.addEventListener('event', handler, { passive: true });</code></pre>
					<p class="fragment" data-fragment-index=2>Native support for single use events.</p>
					<pre class="fragment" data-fragment-index=2><code class="javascript">// Single use event that only fires once in Chrome/FX
element.addEventListener('event', handler, { once: true });

// Though it's not too hard to do this in IE
element.addEventListener('event', function handler(event) {
    // Remove the event listener
    event.currentTarget.removeEventListener(event.type, handler);
});</code></pre>
				</section>
				<section id="eventGC" style="text-align: left;">
					<h3>Garbage Collection &amp; Events</h3>
					<p>GC in JS varies by engine, but it involves looking through objects in memory and discarding anything that isn't referenced anymore.</p>
					<p class="fragment">This can be a problem with events, as they can 'hold on' to variables and DOM objects.</p>
					<p class="fragment">jQuery automatically tidies up events when you remove a DOM element.</p>
					<p class="fragment">Without it, you have to be careful to call <code class="javascript inline">element.removeEventListener('event', handler)</code> yourself.</p>
				</section>
				<section id="eventDom" style="text-align: left;">
					<h3>DOM &amp; then Events</h3>
					<p>jQuery's combination of event helpers and DOM creation suits a two step process:</p>
					<pre class="fragment"><code class="javascript">// 1) Create HTML content
var element = $('<span>content<button id="but">Click Me!</button></span>');

// 2) Find the element added and subscribe to the click event
$('#but', element).on('click', function() {
	alert('Please do not push this button again!');
});</code></pre>
					<p class="fragment">This isn't the only way in jQuery, but it's by far the most common and easiest pattern.</p>
				</section>
				<section id="eventBetter" style="text-align: left;" data-background="#009688">
					<h3>Events with DOM</h3>
					<p>If we build DOM directly we can add events directly too:</p>
					<pre class="fragment"><code class="javascript">// 1) Create DOM content
var outer = document.createElement('span');
outer.appendChild(document.createTextNode('content'));
var button = document.createElement('button');
button.appendChild(document.createTextNode('Click Me!'));
outer.appendChild(button);

// 2) Subscribe to the click event directly against the DOM element
button.addEventListener('click', function() {
	alert('Please do not push this button again!');
});</code></pre>
					<p class="fragment">Quicker, but ugly...</p>
				</section>
				<section data-background="https://thumbs.mic.com/MTRkN2ZkNWQ2NCMvclIxVVJiZHZuRVk4VThlZS1FTnk5REZmeXl3PS9maXQtaW4vOTAweDkwMC9maWx0ZXJzOm5vX3Vwc2NhbGUoKTpxdWFsaXR5KDgwKS9odHRwOi8vaW1hZ2VzLm1pYy5jb20vdW91ZGI0emJ0Y3Z0a2U3c3E3Y255dGFudnd5amFyMHA3cGZqbXQycDZnM3c3amh3dzJreDVvbXZjZTFlanI2cS5naWY.gif"></section>
				<section id="eventBest" style="text-align: left;" data-background="#009688">
					<h3>Events with 'Better' DOM</h3>
					<p>We can add events directly to our simple <a href="https://jsfiddle.net/KeithHenry/7snzkugx/" target="_blank">DOM builder</a>.</p>
					<pre class="fragment"><code class="javascript">// Create virtual DOM
var outer = 
	span('content', 
		button({click: function() {
			alert('Please do not push this button again!');
		}}, 'Click Me!'));</code></pre>
					<p class="fragment">Nice. What about JSX/React?</p>
					<pre class="fragment hljs no-highlight">// JSX syntax
var outer = 
    &lt;span&gt;content 
        &lt;button onClick={function() {
            alert('Please do not push this button again!');
        }}&gt;Click Me!&lt;/button&gt;
    &lt;/span&gt;;</pre>
				</section>
				<section id="eventConclusion" style="text-align: left;">
					<h3>jQuery Events</h3>
					<p class="fragment">jQuery events are tidy and good for GC.</p>
					<p class="fragment">But they do not support recent features.</p>
					<p class="fragment">They add the most value to disconnected HTML and events.</p>
				</section>
			</section>

			<section>
				<section id="http">
					<h2>HTTP Requests</h2>
					<p>jQuery has <code class="javascript inline">$.ajax</code> for consistent HTTP requests, 
					and helpful shorthand like <code class="javascript inline">$('selector').load('url')</code>.</p>
				</section>
				<section id="fetch" style="text-align: left;">
					<h3><a href="https://developer.mozilla.org/en/docs/Web/API/Fetch_API" target="_blank"><code class="javascript inline">fetch</code> API</a></h3>
					<p class="fragment">Stream and large response handling.</p>
					<p class="fragment">Available to workers.</p>
					<p class="fragment">Native promise support.</p>
					<p class="fragment">Supported by everyone except IE - it's easier to shim <code class="javascript inline">fetch</code> for IE users than it is to make everyone use a wrapper API.</p>
				</section>
				<section id="httpConclusion" style="text-align: left;">
					<h3>jQuery AJAX</h3>
					<p class="fragment">jQuery AJAX is OK.</p>
					<p class="fragment">But there is a better option out there for modern browsers.</p>
				</section>
			</section>

			<section>
				<section id="ready">
					<h2>Ready Event</h2>
					<p>For most of jQuery's life this has been <i>awesome</i>, 
					but now it could be the greatest weakness.</p>
				</section>
				<section id="readyReplacement" style="text-align: left;">
					<h3>Ready Replacement</h3>
					<pre><code class="javascript">// Handle the document ready event
function $(selector, context) {
    // If passed a function
    if(typeof selector === 'function')
    {
        if(document.readyState === 'complete')
            // DOM content already loaded, fire once 
			// the current script block has finished
            window.setTimeout(selector);
        else
            // Listen for the content loaded event
            document.addEventListener('DOMContentLoaded', selector, 
				{ once: true });

        return;
    } // ...</code></pre>
					<p class="fragment">It's fairly easy to duplicate jQuery's behaviour (though this is simplified).</p>
				</section>
				<section id="readyProblems" style="text-align: left;">
					<h3>So what's wrong with Ready?</h3>
					<p class="fragment">No support for <code class="html inline">&lt;script async ...&gt;</code></p>
					<p class="fragment">No support for <code class="html inline">&lt;script defer ...&gt;</code></p>
					<p class="fragment">Every jQuery component relies on ready, so...</p>
					<p class="fragment">Everything waits for all the JS to download before becoming interactive.</p>
					<p class="fragment">This is fine for corporate apps where people will wait, but is a <a href="#mobileOptimisation">problem for mobile</a>.</p>
				</section>
				<section id="readyBetter" style="text-align: left;">
					<h3>What could be done better?</h3>
					<p class="fragment">jQuery simplifies something that just isn't simple.</p>
					<p class="fragment">Components and pages have a lifecycle</p>
					<p class="fragment">Interactivity should be progressive, not all on ready.</p>
					<p class="fragment">It should be possible to defer or asynchronously load components.</p>
				</section>
			</section>

			<section>
				<section id="mobile">
					<h2>Mobile</h2>
					<p>Mobile devices are a whole new battleground.</p>
				</section>
				<section id="mobileSlow1" style="text-align: left;">
					<h3>Mobile is sloooooww</h3>
					<p class="fragment">Slower connections.</p>
					<p class="fragment">Higher latency.</p>
					<p class="fragment">More work means more heat and less battery.</p>
					<p class="fragment">Phones are slower than you think.</p>
				</section>
				<section id="mobileSlow2" style="text-align: left;">
					<h3>How much slower?</h3>
					<p class="fragment">The fastest phones on the market are <i>10 times</i> slower than the average desktop, 
					running flat out and burning through their battery. </p>
					<p class="fragment">The average phone is <i>far</i> slower.</p>
					<p class="fragment">200ms parsing and executing jQuery becomes 2 seconds of waiting with an uninteractive page.</p>
					<p class="fragment">20ms of overhead on a click event becomes 200ms of lag where the user will tap the button again.</p>
				</section>
				<section id="mobileGoldenRule" style="text-align: left;color:#000000;" data-background="#FFEA00">
					<h3 style="color:#000000;">Run as little JS as possible!</h3>
					<p>No code is faster than code you don't even have to load.</p>
					<p class="fragment">jQuery's replace-everything strategy is just not a good fit here.</p>
				</section>
				<section id="mobileOptimisation" style="text-align: left;">
					<h3>Other rules for mobile optimisation</h3>
					<p class="fragment">Execute all scripts asynchronously (jQuery's <a href="#readyProblems">ready event blocks this</a>).</p>
					<p class="fragment">Don't block rendering waiting for resources to load or JS to run (broken by many jQuery components).</p>
					<p class="fragment">Only use GPU accelerated animations (no <code class="javascript inline">.slideUp()</code>/<code class="javascript inline">.slideDown()</code>, amongst many others)</p>
					<p class="fragment">Only load the script you'll need.</p>
				</section>
				<section id="jQueryMobile" style="text-align: left;">
					<h3>jQuery Mobile</h3>
					<p class="fragment">jQuery does have a <a href="https://jquerymobile.com/" target="_blank">mobile touch-optimised version</a>.</p>
					<p class="fragment">It's 196KB (un-compressed) on top of jQuery (another 86KB) and has to finish loading before anything will work.</p>
					<p class="fragment">I refer you back to the <a href="#mobileGoldenRule">golden rule</a>.</p>
				</section>
				<section id="mobileSummary">
					<p>While jQuery has always claimed to be <i>lightweight</i>, in the mobile context it really <i>really</i> isn't.</p>
				</section>
			</section>

			<section>
				<section id="paradigmShift">
					<h2>Paradigm Shift</h2>
					<p>The biggest issue with jQuery is that it's so well optimised for a previous paradigm.</p>
				</section>
				<section id="paradigmOverTime" style="text-align: left;">
					<p>2005: server builds HTML with inlined JS events.<br>
Mobile was an afterthought.</p>
					<p class="fragment">2010: static HTML with events subscribed to in separate client side code.<br>
jQuery is well suited for this pattern.<br>
Mobile was all about native app development.</p>
					<p class="fragment">2017: REST services with either client side rendering or rehydration, maybe web components, all of which build the DOM and hook up events as they go.   <br>
Best practice with most projects is now mobile-first.</p>
				</section>
				<section id="paradigmClientRender" style="text-align: left;">
					<h3>Client-side Render</h3>
					<p class="fragment">If you render HTML in JS then you optimise building components.</p>
					<p class="fragment">Frameworks that parse pre-built HTML add a lot less value.</p>
				</section>
				<section id="paradigmHttp2" style="text-align: left;">
					<h3><a href="https://http2.github.io/" target="_blank">HTTP/2</a></h3>
					<p class="fragment">HTTP/2 makes it much quicker for browsers to download multiple files at once.</p>
					<p class="fragment">This has the potential to further change the paradigm...</p>
				</section>
				<section id="paradigmPredictions" style="text-align: left;">
					<h3>The Next Paradigm</h3>
					(Entirely my opinions.)
					<p class="fragment">Single page app loads with tiny, heavily optimised, core library.</p>
					<p class="fragment">Shims loaded as needed - Chrome users will get none, while IE users will have to wait longer.</p>
					<p class="fragment">Resources and shims will be small files loaded in parallel over HTTP/2.</p>
					<p class="fragment">Preload and HTTP/2 push will send down resources before they are requested.</p>
					<p class="fragment">Service workers will cache resources and provide offline functionality.</p>
				</section>
			</section>

			<section>
				<section id="bpIntro" data-background="#009688">
					<h2>Aside: Coding 'Best Practice'</h2>
					<p class="fragment">Weirdly, this meta has come full circle as rendering has moved from server to client.</p>
				</section>
				<section id="bp2006" style="text-align: left;" data-background="#009688">
					<h3>2005</h3>
<pre><code class="asp"><%-- Typical asp/aspx page --%>
<div>
	<%=dynamicContent%>
	<button click="javascript:alert(<%=message%>)" 
		 class="btn">
		 Click Me!
	</button>
</div></code></pre>
<p class="fragment">Mix of server and client code.</p>
<p class="fragment">Hard to support complex actions.</p>
<p class="fragment">Hard to change DOM.</p>
<p class="fragment">Messy to package into components.</p>
				</section>
				<section id="bp2010" style="text-align: left;" data-background="#009688">
					<h3>2010: jQuery to the rescue!</h3>
<pre><code class="razor">@* Typical dynamic razor page, but could be anything *@
<div>
	@dynamicContent
	<button id="clickableButton" 
		 class="btn"
		 data-message="@message">
		 Click Me!
	</button>
</div>
<script type="text/javascript" src="hook-up-page.js"></script></code></pre>
<pre class="fragment"><code class="javascript">// Static hook-up-page.js
$(function(){
	// Once the has loaded set up the click event
	var $clickableButton = $('#clickableButton').click(function(e){
		// This will be a DOM element, we need $this to get the data-attr
		var $this = $(this);
		alert($this.data('message'));
	});
});
</code></pre>
				</section>
				<section id="bp2017jsx" style="text-align: left;" data-background="#009688">
					<h3>2017: JSX/React</h3>
					<pre class="hljs no-highlight">// JSX inlines the functionality
const element = (
&lt;div&gt;
    {dynamicContent}
    &lt;button onClick={function() { alert(message); }} 
        className="btn"&gt;
        Click Me!
    &lt;/button&gt;
&lt;/div&gt;);</pre>
				</section>
				<section id="bp2017ng" style="text-align: left;" data-background="#009688">
					<h3>2017: Angular</h3>
<pre><code class="javascript">@Component({
    selector: 'my-component',
    template: `
<div>
	{{dynamicContent}}
	<button (click)="alertMessage()" 
		class="btn">
		Click Me!
	</button>
</div>`})
export class MyComponent {
    get dynamicContent() { ... }
    alertMessage() { alert(this.message); }
}</code></pre>
				</section>
				<section id="bp2017vue" style="text-align: left;" data-background="#009688">
					<h3>2017: Vue JS</h3>
<pre><code class="javascript">Vue.component(
	'my-component', 
	{
		template: `
<div>
	{{dynamicContent}}
	<button v-on:click="alertMessage" 
		class="btn">
		Click Me!
	</button>
</div>`,
		props: ['message', 'dynamicContent'],
		methods: {
			alertMessage: function () { alert(this.message); }
		}
	});</code></pre>
				</section>
				<section id="bp2017polymer" style="text-align: left;" data-background="#009688">
					<h3>2017: Polymer</h3>
<pre><code class="html"><dom-module id="my-component">
    <template>
		{{dynamicContent}}
		<button on-tap="alertMessage" 
			class="btn">
			Click Me!
		</button>
	</template>
	<script>
        class MyComponent extends Polymer.Element {
            static get is() { return 'my-component'; }
			get dynamicContent() { ... }
			alertMessage() { alert(this.message); }
		}
		customElements.define(MyComponent.is, MyComponent);
	</script>
</dom-module>
</code></pre>
				</section>
				<section id="bp2017patterns" style="text-align: left;" data-background="#009688">
					<h3>2017</h3>
					<p>Many frameworks now...</p>
					<p class="fragment">Use an ES6 class as the component.</p>
					<p class="fragment">Include HTML templates or use the new <code class="html inline">&lt;template&gt;</code> tag.</p>
					<p class="fragment">Build components that can be included in HTML: <code class="html inline">&lt;my-component&gt;&lt;/my-component&gt;</code>.</p>
					<p class="fragment">Have <code class="javascript inline">{{model-binding}}</code> of some kind.</p>
					<p class="fragment">Work both on server and in browser.</p>
				</section>
			</section>

			<section>
				<section id="replacement">
					<h2>Replacing jQuery</h2>
					<p>There are alternatives</p>
				</section>
				<section id="simpleReplacement" style="text-align: left;">
					<h3>Our simple jQuery</h3>
					<p><a href="https://github.com/KeithHenry/jsmeetup-jquery-rise-fall/blob/master/samples/noddy-jquery.js" target="_blank"><span class="fa fa-fw fa-github"></span> Source</a> (&lt;1KB).</p>
					<p><a href="https://jsfiddle.net/KeithHenry/stw0twg3/" target="_blank"><span class="fa fa-fw fa-jsfiddle"></span> JS Fiddle Demo</a>.</p>
					<p class="fragment">Others have done it better...</p>
				</section>
				<section id="dropinReplacement" style="text-align: left;">
					<h3>jQuery Drop-in Replacements</h3>
					<p>jQuery is 86KB</p>
					<p class="fragment"><a href="http://zeptojs.com/" target="_blank">Zepto</a> 26KB.</p>
					<p class="fragment"><a href="https://github.com/kiltjs/jqlite" target="_blank">jqlite</a> 20KB, used by Angular JS</p>
					<p class="fragment">(Angular 2/4 has dropped it)</p>
				</section>
				<section id="alternatives" style="text-align: left;">
					<h3>Alternatives</h3>
					<p>There's lots of help online to wean off jQuery...</p>
					<p class="fragment"><a href="http://youmightnotneedjquery.com/" target="_blank">You Might Not Need jQuery</a></p>
					<p class="fragment"><a href="https://blog.garstasio.com/you-dont-need-jquery/" target="_blank">You Don't Need jQuery!</a></p>
					<p class="fragment"><a href="https://www.sitepoint.com/do-you-really-need-jquery/" target="_blank">Do You Really Need jQuery?</a></p>
					<p class="fragment">Loads more!</p>
				</section>
			</section>

			<section>
				<section id="recruitmentIntro">
					<h2>Recruitment &amp; Skills</h2>
					<p>There are a lot of JS developers who reach for jQuery for <i>every</i> project.</p>
					<p class="fragment">That can be both a good and a bad thing.</p>
				</section>
				<section id="recruitment" style="text-align: left;">
					<h3>Team Management</h3>
					<p>jQuery is ubiqutous, mature, and easy to learn.</p>
					<p class="fragment">For all of the exciting new frameworks listed above one of the top Stack Overflow questions is...</p>
					<blockquote class="fragment">How do I use {framework} with jQuery?</blockquote>
					<p class="fragment">jQuery developers are cheaper and easier to source than, say, React or Angular specialists.</p>
					<p class="fragment">If you need to build a large team and you're dealing with corporate or internal customers then jQuery is a pragmatic choice.</p>
				</section>
				<section id="skills" style="text-align: left;">
					<h3>Skills</h3>
					<p>jQuery is generic, old, and easy to learn.</p>
					<p class="fragment">If you're coding with jQuery try using it less. Plain JS is perfectly compatible.</p>
					<p class="fragment">jQuery should be just one of a set of JS skills that you have.</p>
					<p class="fragment">You should be as comfortable coding vanilla JS with no libraries loaded at all as you are with jQuery.</p>
				</section>
			</section>

			<section>
				<section>
					<h2>Conclusion</h2>
				</section>
				<section>
					<h3>jQuery has a place in history</h3>
				</section>
				<section>
					<h3>jQuery is a decade old paradigm and the goalposts have moved</h3>
				</section>
				<section>
					<h3>The future is something else</h3>
				</section> 
				<section id="conclusion" data-background="#FF9800" style="text-align: left;color:#000000;">
					<h3>Conclusion</h3>
					<p>jQuery has a place in history.</p>
					<p>jQuery is a decade old paradigm and the goalposts have moved.</p>
					<p>The future is something else.</p>
				</section>
			</section>

			<section id="questions" data-background="#9C27B0">
				<h1>Questions?</h1>
				<div>
					<div style="margin:1em 0;">
						<img src="img/kxh_sq.jpg" border="0" style="border: none; border-radius: 50%; width: 2em; height: 2em; vertical-align: middle; margin: 0 .5em 0 0;">
						<a href="mailto:keith.henry@evolutionjobs.co.uk">keith.henry@evolutionjobs.co.uk</a>
					</div>

					<div style="margin:1em 0;">
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-twitter"></span> <a href="https://twitter.com/KHenry" target="_blank">@khenry</a>
						</div>
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-github"></span> <a href="https://github.com/KeithHenry" target="_blank">KeithHenry</a>
						</div>
						<div style="width: 32%; display: inline-block;">
							<span class="fa fa-fw fa-stack-overflow"></span>
							<a href="http://stackexchange.com/users/689" target="_blank">
								<img src="http://stackexchange.com/users/flair/689.png" width="208" height="58" alt="profile for Keith on Stack Exchange, a network of free, community-driven Q&amp;A sites"
									title="profile for Keith on Stack Exchange, a network of free, community-driven Q&amp;A sites" style="border: 0; padding: 0; margin: 0; vertical-align: middle;">
							</a>
						</div>
					</div>
					<div style="margin:1em 0;">
						<span class="fa fa-fw fa-television"></span> 
						<a href="https://keithhenry.github.io/jsmeetup-jquery-rise-fall">https://keithhenry.github.io/jsmeetup-jquery-rise-fall</a>
					</div>
				</div>
			</section>
		</div>
	</div>
	<script type="text/javascript" src="plugin/highlight/highlight.js"></script>
	<script type="text/javascript" src="reveal.js"></script>
	<script>
		Reveal.initialize({
			controls: true,
			progress: true,
			history: true,
			center: true,
			transition: 'slide'
		});

		hljs.configure({
			tabReplace: '    ' // 4 spaces
		});

		hljs.initHighlightingOnLoad();

		var codes = document.querySelectorAll('code.inline:not(.hljs):not(.nohighlight)');
		for(var i in codes) {
			hljs.highlightBlock(codes[i]);
		}
			
	</script>
</body>

</html>